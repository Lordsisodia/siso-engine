# RALF Configuration Schema
# =========================
# JSON schema for configuration validation.

version:
  type: string
  required: true
  pattern: "^\\d+\\.\\d+\\.\\d+(-[\\w]+)?$"

system:
  type: dict
  properties:
    name:
      type: string
      required: true
    environment:
      type: string
      required: true
      validator: non_empty_string
    log_level:
      type: string
      default: "INFO"
      pattern: "^(DEBUG|INFO|WARNING|ERROR|CRITICAL)$"
    timezone:
      type: string
      default: "UTC"
    debug_mode:
      type: boolean
      default: false

api:
  type: dict
  properties:
    enabled:
      type: boolean
      default: true
    host:
      type: string
      default: "localhost"
    port:
      type: int
      validator: port
      default: 8080
    timeout:
      type: int
      validator: timeout
      default: 30
    cors_enabled:
      type: boolean
      default: false
    ssl_required:
      type: boolean
      default: false
    rate_limit:
      type: dict
      properties:
        enabled:
          type: boolean
          default: true
        requests_per_minute:
          type: int
          validator: positive_int
          default: 100

database:
  type: dict
  properties:
    host:
      type: string
      required: true
    port:
      type: int
      validator: port
      default: 5432
    name:
      type: string
      required: true
      validator: non_empty_string
    ssl_mode:
      type: string
      default: "disable"
    pool_size:
      type: int
      validator: positive_int
      default: 10
    timeout:
      type: int
      validator: timeout
      default: 30

security:
  type: dict
  properties:
    api_key_required:
      type: boolean
      default: false
    rate_limiting:
      type: boolean
      default: true
    encryption:
      type: dict
      properties:
        algorithm:
          type: string
          default: "AES-256-GCM"
        key_iterations:
          type: int
          validator: positive_int
          default: 100000

features:
  type: dict
  properties:
    automated_testing:
      type: boolean
      default: false
    github_integration:
      type: boolean
      default: false
    api_gateway:
      type: boolean
      default: false
    code_review:
      type: boolean
      default: false
    performance_monitoring:
      type: boolean
      default: false

execution:
  type: dict
  properties:
    max_concurrent_tasks:
      type: int
      validator: positive_int
      default: 3
    task_timeout:
      type: int
      validator: positive_int
      default: 3600
    retry_attempts:
      type: int
      validator: positive_int
      default: 3
    retry_delay:
      type: int
      validator: positive_int
      default: 60
    verbose_logging:
      type: boolean
      default: false

monitoring:
  type: dict
  properties:
    enabled:
      type: boolean
      default: false
    metrics_port:
      type: int
      validator: port
      default: 9090
    health_check_interval:
      type: int
      validator: positive_int
      default: 60
    alerting:
      type: dict
      properties:
        enabled:
          type: boolean
          default: false
        webhook_url:
          type: string
          validator: url

storage:
  type: dict
  properties:
    config_dir:
      type: string
      default: "./config"
    data_dir:
      type: string
      default: "./data"
    logs_dir:
      type: string
      default: "./logs"
    backup_dir:
      type: string
      default: "./backups"
